Below is a tutorial designed for your lecture, focusing exclusively on `uv`, a high-performance Python package and project manager written in Rust. The tutorial is tailored for Python programmers, covering `uv`'s core features, dependency management, and project setup, starting with simple Python programs and progressing to a Flask web application. It is structured as a markdown document, similar to the previous Poetry tutorial, and incorporates insights from relevant web sources about `uv` to ensure accuracy and completeness.[](https://www.datacamp.com/tutorial/python-uv)[](https://www.saaspegasus.com/guides/uv-deep-dive/)[](https://github.com/astral-sh/uv)


# Python UV Tutorial for Programmers

This tutorial is designed for Python programmers who want to learn how to use `uv`, a fast and efficient Python package and project manager written in Rust. We'll cover `uv`'s core features, dependency management, virtual environments, and project workflows, starting with simple Python programs and moving to a Flask web application. `uv` is a drop-in replacement for tools like `pip`, `virtualenv`, and Poetry, offering 10-100x faster performance.[](https://www.datacamp.com/tutorial/python-uv)[](https://astral.sh/blog/uv)

## 1. Introduction to UV

`uv` is a modern Python package and project manager developed by Astral, designed to streamline dependency management, virtual environments, and project workflows. Written in Rust, it prioritizes speed, reliability, and simplicity, replacing tools like `pip`, `virtualenv`, `poetry`, and `pyenv`.[](https://github.com/astral-sh/uv)[](https://astral.sh/blog/uv)

### Why Use UV?
- **Speed**: 10-100x faster than `pip` for package installation and dependency resolution.[](https://www.datacamp.com/tutorial/python-uv)
- **Unified Tooling**: Combines package management, virtual environments, and project management in one tool.
- **Reproducible Environments**: Uses `uv.lock` for exact dependency versions across machines.
- **Standards-Compliant**: Works with existing Python workflows and PyPI.[](https://astral.sh/blog/uv)
- **Cross-Platform**: Supports Linux, Windows, and macOS.[](https://codemaker2016.medium.com/introducing-uv-next-gen-python-package-manager-b78ad39c95d7)

## 2. Installing UV

Install `uv` using the official installation script:

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

Alternatively, use Homebrew or pip:
```bash
brew install uv
pip install uv
```

Verify installation:
```bash
uv --version
```

See [docs.astral.sh/uv](https://docs.astral.sh/uv/getting-started/installation/) for more installation methods.[](https://docs.astral.sh/uv/)

## 3. UV Basics

- **pyproject.toml**: Defines project metadata and dependencies.
- **uv.lock**: A lockfile ensuring reproducible dependency versions (commit to version control).[](https://docs.astral.sh/uv/guides/projects/)
- **Virtual Environment**: Automatically created in `.venv` for project isolation.
- **Commands**: `uv` provides commands for managing dependencies, environments, and scripts.

### Key Commands
```bash
uv init                # Initialize a new project
uv add <package>       # Add a dependency
uv sync                # Install dependencies
uv run <command>       # Run a command in the project environment
uv venv                # Create a virtual environment
```

## 4. Managing Simple Python Programs with UV

Let’s start with two simple Python programs to learn `uv`'s workflow.

### Example 1: Hello World Script

Create a directory `hello-python` and initialize a `uv` project:

```bash
mkdir hello-python
cd hello-python
uv init --no-readme --python 3.9
```

This creates a `pyproject.toml` and `.python-version` file. Create the following file:

**hello.py**
```python
print("Hello, UV!")
```

**pyproject.toml** (generated by `uv init`, simplified)
```toml
[project]
name = "hello-python"
version = "0.1.0"
description = "A simple Python script"
dependencies = []

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv]
python = "3.9"
```

Run the script:
```bash
uv run python hello.py
```

**Expected Output**:
```
Hello, UV!
```

`uv` automatically creates a virtual environment in `.venv` and runs the script in it. Alternatively, activate the environment:
```bash
source .venv/bin/activate
python hello.py
deactivate
```

### Example 2: Simple Calculator Script

Create a directory `calc-python` and initialize a project:

```bash
mkdir calc-python
cd calc-python
uv init --no-readme --python 3.9
```

Create the following file:

**calculator.py**
```python
def add(a, b):
    return a + b

result = add(5, 3)
print(f"5 + 3 = {result}")
```

**pyproject.toml**
```toml
[project]
name = "calc-python"
version = "0.1.0"
description = "A simple calculator script"
dependencies = []

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv]
python = "3.9"
```

Run the script:
```bash
uv run python calculator.py
```

**Expected Output**:
```
5 + 3 = 8
```

These examples show how `uv` simplifies project setup and execution.

## 5. Managing a Python Web Application with UV

Let’s use `uv` to manage a Flask web application with dependencies.

### Step 1: Create a Flask App
Create a directory `my-python-app` and initialize a project:

```bash
mkdir my-python-app
cd my-python-app
uv init --no-readme --python 3.9
```

Add Flask as a dependency:
```bash
uv add flask==2.0.1
```

This updates `pyproject.toml` and creates `uv.lock`. Create the following file:

**app.py**
```python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
    return "Hello, UV-powered Flask App!"

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
```

**pyproject.toml** (updated by `uv add`)
```toml
[project]
name = "my-python-app"
version = "0.1.0"
description = "A Flask app with UV"
dependencies = [
    "flask==2.0.1",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv]
python = "3.9"
```

### Step 2: Install Dependencies and Run
Install dependencies:
```bash
uv sync
```

Run the Flask app:
```bash
uv run python app.py
```

Visit `http://localhost:5000` in your browser to see the app running.

Alternatively, use the virtual environment:
```bash
source .venv/bin/activate
python app.py
deactivate
```

## 6. Best Practices for UV

### Lock Dependencies
- Commit `uv.lock` to version control for reproducible environments.
- Update dependencies safely:
```bash
uv sync --upgrade
```

### Separate Development Dependencies
Add development tools (e.g., pytest) to a separate group:
```bash
uv add --dev pytest
```

This updates `pyproject.toml`:
```toml
[tool.uv.dev-dependencies]
pytest = "^7.0"
```

### Specify Python Versions
Pin the Python version in `.python-version` or `pyproject.toml`. `uv` can install Python automatically:
```bash
uv python install 3.9
```

### Use Inline Dependencies
For scripts, add dependencies directly in the code:
```python
# script.py
# /// script
# dependencies = ["requests==2.26.0"]
# ///
import requests
print(requests.get("https://astral.sh").text)
```

Run:
```bash
uv run script.py
```

`uv` installs dependencies in an isolated environment.[](https://docs.astral.sh/uv/)

### Optimize Performance
- Use `uv sync` to keep environments lean by removing unlisted packages.
- Leverage `uv`’s global module cache to avoid redundant downloads.[](https://astral.sh/blog/uv)

## 7. Publishing a Package with UV

`uv` simplifies packaging and publishing to PyPI.

### Example: Package the Calculator
Modify `calc-python` to be a publishable package.

Update the directory structure:
```bash
calc-python/
├── src/
│   └── calc_python/
│       ├── __init__.py
│       └── calculator.py
├── pyproject.toml
├── README.md
├── uv.lock
├── .python-version
```

Move `calculator.py` to `src/calc_python/calculator.py`:
```python
def add(a, b):
    return a + b
```

Update `pyproject.toml`:
```toml
[project]
name = "simple-calculator"
version = "0.1.0"
description = "A simple calculator library"
readme = "README.md"
license = "MIT"
requires-python = ">=3.9"
dependencies = []

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv]
python = "3.9"
```

Create `README.md`:
```markdown
# Simple Calculator
A basic Python library for arithmetic operations.
```

Build the package:
```bash
uv build
```

This creates `dist/simple_calculator-0.1.0-py3-none-any.whl` and `dist/simple_calculator-0.1.0.tar.gz`.[](https://docs.astral.sh/uv/guides/projects/)

Publish to PyPI (requires an account and API token):
```bash
uv publish --token <your-pypi-token>
```

## 8. Debugging and Troubleshooting

- **Dependency Conflicts**: Check `uv.lock` and resolve with:
```bash
uv sync --refresh
```
- **Virtual Environment Issues**: Recreate the environment:
```bash
rm -rf .venv
uv sync
```
- **Verify Dependencies**: List installed packages:
```bash
uv pip list
```
- **Python Version Issues**: Ensure the correct version is installed:
```bash
uv python list
```

## 9. Exercise for Attendees

**Task**: Create a Python script that fetches data from an API and manages dependencies with `uv`.

1. Write a script using `requests` to fetch data from `https://jsonplaceholder.typicode.com/posts`.
2. Set up a `uv` project and add `requests` as a dependency.
3. Run the script and verify the output.

**Solution**:

Create a directory `fetch-data` and initialize a project:

```bash
mkdir fetch-data
cd fetch-data
uv init --no-readme --python 3.9
uv add requests==2.26.0
```

**fetch_data.py**
```python
import requests

response = requests.get("https://jsonplaceholder.typicode.com/posts")
with open("output.json", "w") as f:
    f.write(response.text)
print("Data saved to output.json")
```

**pyproject.toml**
```toml
[project]
name = "fetch-data"
version = "0.1.0"
description = "Fetch data from an API"
dependencies = [
    "requests==2.26.0",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv]
python = "3.9"
```

Run:
```bash
uv sync
uv run python fetch_data.py
```

Verify `output.json` contains the API response.

## 10. Additional Resources
- [UV Documentation](https://docs.astral.sh/uv/)[](https://docs.astral.sh/uv/)
- [UV GitHub Repository](https://github.com/astral-sh/uv)[](https://github.com/astral-sh/uv)
- [Python Packaging Guide](https://packaging.python.org/)
- [UV Tutorial on DataCamp](https://www.datacamp.com/tutorial/python-uv-package-manager)[](https://www.datacamp.com/tutorial/python-uv)

---

This tutorial introduces `uv` with simple Python programs before tackling a Flask app, making it accessible for beginners. Encourage attendees to experiment and ask questions during the lecture!
